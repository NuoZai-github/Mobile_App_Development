<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="Mobile_App_Develop.Views.RegisterPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Create Account"
             BackgroundColor="{StaticResource White}">
    
    <ScrollView>
        <Grid Padding="30,20,30,30">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Header Section -->
            <StackLayout Grid.Row="0" Spacing="15" Margin="0,20,0,30">
                <Label Text="Create Account" 
                       FontSize="28" 
                       FontAttributes="Bold" 
                       TextColor="{StaticResource TextPrimary}" 
                       HorizontalOptions="Center" />
                
                <Label Text="Join UTS Bus Tracker community" 
                       FontSize="16" 
                       TextColor="{StaticResource TextSecondary}" 
                       HorizontalOptions="Center" />
            </StackLayout>

            <!-- Registration Form Section -->
            <StackLayout Grid.Row="1" Spacing="20">
                
                <!-- First Name Input -->
                <Frame Style="{StaticResource InputFrame}">
                    <Entry x:Name="FirstNameEntry"
                           Placeholder="First Name"
                           PlaceholderColor="{StaticResource TextSecondary}"
                           TextColor="{StaticResource TextPrimary}"
                           BackgroundColor="Transparent"
                           Margin="15,10" />
                </Frame>

                <!-- Last Name Input -->
                <Frame Style="{StaticResource InputFrame}">
                    <Entry x:Name="LastNameEntry"
                           Placeholder="Last Name"
                           PlaceholderColor="{StaticResource TextSecondary}"
                           TextColor="{StaticResource TextPrimary}"
                           BackgroundColor="Transparent"
                           Margin="15,10" />
                </Frame>

                <!-- Student ID Input -->
                <Frame Style="{StaticResource InputFrame}">
                    <Entry x:Name="StudentIdEntry"
                           Placeholder="Student ID"
                           PlaceholderColor="{StaticResource TextSecondary}"
                           TextColor="{StaticResource TextPrimary}"
                           BackgroundColor="Transparent"
                           Keyboard="Text"
                           Margin="15,10" />
                </Frame>

                <!-- Email Input -->
                <Frame Style="{StaticResource InputFrame}">
                    <Entry x:Name="EmailEntry"
                           Placeholder="Email Address"
                           PlaceholderColor="{StaticResource TextSecondary}"
                           TextColor="{StaticResource TextPrimary}"
                           BackgroundColor="Transparent"
                           Keyboard="Email"
                           Margin="15,10" />
                </Frame>

                <!-- Password Input -->
                <Frame Style="{StaticResource InputFrame}">
                    <Entry x:Name="PasswordEntry"
                           Placeholder="Password"
                           PlaceholderColor="{StaticResource TextSecondary}"
                           TextColor="{StaticResource TextPrimary}"
                           BackgroundColor="Transparent"
                           IsPassword="True"
                           Margin="15,10" />
                </Frame>

                <!-- Confirm Password Input -->
                <Frame Style="{StaticResource InputFrame}">
                    <Entry x:Name="ConfirmPasswordEntry"
                           Placeholder="Confirm Password"
                           PlaceholderColor="{StaticResource TextSecondary}"
                           TextColor="{StaticResource TextPrimary}"
                           BackgroundColor="Transparent"
                           IsPassword="True"
                           Margin="15,10" />
                </Frame>

                <!-- Terms and Conditions -->
                <StackLayout Orientation="Horizontal" Spacing="10" Margin="0,10,0,0">
                    <CheckBox x:Name="TermsCheckBox" 
                              Color="{StaticResource Primary}" />
                    <Label VerticalOptions="Center">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="I agree to the " TextColor="{StaticResource TextSecondary}" FontSize="14" />
                                <Span Text="Terms of Service" TextColor="{StaticResource Primary}" FontSize="14" TextDecorations="Underline">
                                    <Span.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="OnTermsTapped" />
                                    </Span.GestureRecognizers>
                                </Span>
                                <Span Text=" and " TextColor="{StaticResource TextSecondary}" FontSize="14" />
                                <Span Text="Privacy Policy" TextColor="{StaticResource Primary}" FontSize="14" TextDecorations="Underline">
                                    <Span.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="OnPrivacyTapped" />
                                    </Span.GestureRecognizers>
                                </Span>
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>
                </StackLayout>

                <!-- Register Button -->
                <Button x:Name="RegisterButton"
                        Text="Create Account"
                        Style="{StaticResource PrimaryButton}"
                        Margin="0,20,0,0"
                        Clicked="OnRegisterClicked" />

                <!-- Loading Indicator -->
                <ActivityIndicator x:Name="LoadingIndicator"
                                   IsVisible="False"
                                   IsRunning="False"
                                   Color="{StaticResource Primary}"
                                   HeightRequest="30" />

                <!-- Error Message -->
                <Label x:Name="ErrorLabel"
                       IsVisible="False"
                       TextColor="#F44336"
                       FontSize="14"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center" />

            </StackLayout>

            <!-- Login Section -->
            <StackLayout Grid.Row="2" Spacing="10" Margin="0,20,0,0">
                <BoxView BackgroundColor="{StaticResource BorderLight}" HeightRequest="1" Margin="0,0,0,10" />
                
                <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="5">
                    <Label Text="Already have an account?" 
                           TextColor="{StaticResource TextSecondary}" 
                           FontSize="14" />
                    <Label Text="Sign In"
                           TextColor="{StaticResource Primary}"
                           FontSize="14"
                           FontAttributes="Bold">
                        <Label.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnLoginTapped" />
                        </Label.GestureRecognizers>
                    </Label>
                </StackLayout>
            </StackLayout>

        </Grid>
    </ScrollView>
</ContentPage>